import com.alia.jmeterplugin.AliaDoReference;import com.alia.jmeterplugin.entity.ServiceInfoEntity;import com.alibaba.fastjson.JSON;import com.alibaba.fastjson.JSONObject;import org.junit.Test;import static org.hamcrest.CoreMatchers.is;import static org.junit.Assert.assertThat;/** * Created by Alia on 2017/4/7. */public class DoReferenceTest {    @Test    public void doMethod() {        /**         ServiceInfoEntity 为封装好的Service信息，支持自定义         参数1：Service Name，例如：com.epcc.aliaServiceImpl.MyMocker         参数2：Service Version，例如：1.0.0         参数3：Time out配置         */        ServiceInfoEntity serviceInfoEntity = new ServiceInfoEntity(            "com.epcc.aliaServiceImpl.MyMocker",            "1.0.0_aliaTest",            500);        AliaDoReference s = new AliaDoReference(serviceInfoEntity);        //1.通过请求zk，获取dubbo接口信息        /*RegistryConfig regConf = s.getRegistryConfig();        regConf.setAddress("zookeeper://127.0.0.1:2181");        s.getReference().setRegistry(regConf);*/        //2.已知dubbo接口IP地址，直接请求        s.getReference().setUrl("dubbo://172.17.12.26:20880");        Object result = s.reference("testhello", null, null);        /**         * result为dubbo调用返回结果         * 对返回结果进行处理，并校验         * */        String oStr = JSON.toJSONString(result);        JSONObject myJsonObject = JSON.parseObject(oStr);        String state = myJsonObject.getString("success");        assertThat(state, is("true"));    }}